


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="https://codacy.github.io/chart/requirements/">
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.2.2">
    
    
      
        <title>System requirements - Chart</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a2408e81.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#system-requirements" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://codacy.github.io/chart/" title="Chart" class="md-header-nav__button md-logo" aria-label="Chart">
      
  <img src="../images/codacy-logo.svg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Chart
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              System requirements
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://codacy.github.io/chart/" title="Chart" class="md-nav__button md-logo" aria-label="Chart">
      
  <img src="../images/codacy-logo.svg" alt="logo">

    </a>
    Chart
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Installing Codacy on Kubernetes" class="md-nav__link">
      Installing Codacy on Kubernetes
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        System requirements
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="System requirements" class="md-nav__link md-nav__link--active">
      System requirements
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kubernetes-or-microk8s-cluster-setup" class="md-nav__link">
    Kubernetes or MicroK8s cluster setup
  </a>
  
    <nav class="md-nav" aria-label="Kubernetes or MicroK8s cluster setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster-networking-requirements" class="md-nav__link">
    Cluster networking requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-hardware-requirements" class="md-nav__link">
    Cluster hardware requirements
  </a>
  
    <nav class="md-nav" aria-label="Cluster hardware requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codacy-architecture" class="md-nav__link">
    Codacy architecture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standard-cluster-provisioning" class="md-nav__link">
    Standard cluster provisioning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#postgresql-server-setup" class="md-nav__link">
    PostgreSQL server setup
  </a>
  
    <nav class="md-nav" aria-label="PostgreSQL server setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgresql-hardware-requirements" class="md-nav__link">
    PostgreSQL hardware requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preparing-postgresql-for-codacy" class="md-nav__link">
    Preparing PostgreSQL for Codacy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Setting up Kubernetes
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Setting up Kubernetes" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Setting up Kubernetes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../infrastructure/eks-quickstart/" title="Creating an Amazon EKS cluster" class="md-nav__link">
      Creating an Amazon EKS cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../infrastructure/aks-quickstart/" title="Creating an AKS cluster" class="md-nav__link">
      Creating an AKS cluster
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../infrastructure/microk8s-quickstart/" title="Creating a MicroK8s cluster" class="md-nav__link">
      Creating a MicroK8s cluster
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Configuring Codacy
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Configuring Codacy" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Configuring Codacy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Integrations
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Integrations" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/integrations/github-cloud/" title="GitHub Cloud" class="md-nav__link">
      GitHub Cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/integrations/github-enterprise/" title="GitHub Enterprise" class="md-nav__link">
      GitHub Enterprise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/integrations/github-app-create/" title="Creating a GitHub App" class="md-nav__link">
      Creating a GitHub App
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/integrations/gitlab-cloud/" title="GitLab Cloud" class="md-nav__link">
      GitLab Cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/integrations/gitlab-enterprise/" title="GitLab Enterprise" class="md-nav__link">
      GitLab Enterprise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/integrations/bitbucket-cloud/" title="Bitbucket Cloud" class="md-nav__link">
      Bitbucket Cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/integrations/bitbucket-server/" title="Bitbucket Server" class="md-nav__link">
      Bitbucket Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/integrations/email/" title="Emails" class="md-nav__link">
      Emails
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/monitoring/" title="Monitoring" class="md-nav__link">
      Monitoring
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Maintenance and operations
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Maintenance and operations" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Maintenance and operations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../maintenance/upgrade/" title="Upgrading Codacy" class="md-nav__link">
      Upgrading Codacy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../maintenance/uninstall/" title="Uninstalling Codacy" class="md-nav__link">
      Uninstalling Codacy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../maintenance/database/" title="Database migration guide" class="md-nav__link">
      Database migration guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Troubleshooting
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Troubleshooting" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Troubleshooting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshoot/troubleshoot/" title="Troubleshooting Codacy" class="md-nav__link">
      Troubleshooting Codacy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshoot/logs-collect/" title="Collecting logs for Support" class="md-nav__link">
      Collecting logs for Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshoot/k8s-cheatsheet/" title="Kubernetes cheatsheet" class="md-nav__link">
      Kubernetes cheatsheet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kubernetes-or-microk8s-cluster-setup" class="md-nav__link">
    Kubernetes or MicroK8s cluster setup
  </a>
  
    <nav class="md-nav" aria-label="Kubernetes or MicroK8s cluster setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cluster-networking-requirements" class="md-nav__link">
    Cluster networking requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-hardware-requirements" class="md-nav__link">
    Cluster hardware requirements
  </a>
  
    <nav class="md-nav" aria-label="Cluster hardware requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codacy-architecture" class="md-nav__link">
    Codacy architecture
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#standard-cluster-provisioning" class="md-nav__link">
    Standard cluster provisioning
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#postgresql-server-setup" class="md-nav__link">
    PostgreSQL server setup
  </a>
  
    <nav class="md-nav" aria-label="PostgreSQL server setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgresql-hardware-requirements" class="md-nav__link">
    PostgreSQL hardware requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#preparing-postgresql-for-codacy" class="md-nav__link">
    Preparing PostgreSQL for Codacy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="system-requirements">System requirements<a class="headerlink" href="#system-requirements" title="Permanent link">&para;</a></h1>
<p>Before installing Codacy you must ensure that you have the following infrastructure correctly provisioned and configured:</p>
<ul>
<li><a href="#kubernetes-or-microK8s-cluster-setup">Kubernetes or MicroK8s cluster</a></li>
<li><a href="#postgresql-server-setup">PostgreSQL server</a></li>
</ul>
<p>The next sections describe in detail how to set up these prerequisites.</p>
<h2 id="kubernetes-or-microk8s-cluster-setup">Kubernetes or MicroK8s cluster setup<a class="headerlink" href="#kubernetes-or-microk8s-cluster-setup" title="Permanent link">&para;</a></h2>
<p>The cluster running Codacy must satisfy the following requirements:</p>
<ul>
<li>The infrastructure hosting the cluster must be provisioned with the hardware and networking requirements described below</li>
<li>The orchestration platform managing the cluster must be one of:<ul>
<li><a href="https://kubernetes.io/">Kubernetes</a> <strong>version 1.14.*</strong> or <strong>1.15.*</strong></li>
<li><a href="https://microk8s.io/">MicroK8s</a> <strong>version 1.15</strong></li>
</ul>
</li>
<li>The <a href="https://github.com/kubernetes/ingress-nginx">NGINX Ingress controller</a> must be installed and correctly set up in the cluster</li>
</ul>
<h3 id="cluster-networking-requirements">Cluster networking requirements<a class="headerlink" href="#cluster-networking-requirements" title="Permanent link">&para;</a></h3>
<p>The cluster must be configured to accept and establish connections on the following ports:</p>
<table>
<thead>
<tr>
<th></th>
<th>Service</th>
<th>Protocol/Port</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Inbound</td>
<td>SSH</td>
<td>TCP/22</td>
<td><strong>MicroK8s only</strong>, to access the infrastructure remotely.</td>
</tr>
<tr>
<td>Inbound</td>
<td>HTTP</td>
<td>TCP/80</td>
<td>Allow access to the Codacy website and API endpoints</td>
</tr>
<tr>
<td>Inbound</td>
<td>HTTPS</td>
<td>TCP/443</td>
<td>Allow access to the Codacy website and API endpoints</td>
</tr>
<tr>
<td>Outbound</td>
<td>PostgreSQL</td>
<td>TCP/5432</td>
<td>Connection to the PostgreSQL DBMS</td>
</tr>
<tr>
<td>Outbound</td>
<td>SMTP</td>
<td>TCP/25</td>
<td>Connection to your SMTP server</td>
</tr>
<tr>
<td>Outbound</td>
<td>SMTPS</td>
<td>TCP/465</td>
<td>Connection to your SMTP server over TLS/SSL</td>
</tr>
<tr>
<td>Outbound</td>
<td>Docker Hub</td>
<td>*</td>
<td>Connection to Docker Hub to download the required container images</td>
</tr>
<tr>
<td>Outbound</td>
<td>Git provider</td>
<td>*</td>
<td>Connection to the ports required by your remote Git provider</td>
</tr>
</tbody>
</table>
<h3 id="cluster-hardware-requirements">Cluster hardware requirements<a class="headerlink" href="#cluster-hardware-requirements" title="Permanent link">&para;</a></h3>
<p>The high-level architecture described in the next section is important in understanding how Codacy uses and allocates hardware resources. Below we also provide guidance on <a href="#standard-cluster-provisioning">resource provisioning for typical scenarios</a>.</p>
<p>For a custom hardware resource recommendation, please contact us at <a href="mailto://support@codacy.com">support@codacy.com</a>.</p>
<h4 id="codacy-architecture">Codacy architecture<a class="headerlink" href="#codacy-architecture" title="Permanent link">&para;</a></h4>
<p>You can look at Codacy separately as two parts:</p>
<ul>
<li>The <strong>"Platform"</strong> contains the UI and other components important to treat and show results</li>
<li>The <strong>"Analysis"</strong> is the swarm of workers that run <strong>between one and four</strong> linters simultaneously, depending on factors such as the number of files or the programming languages used in your projects</li>
</ul>
<p><img alt="High-level architecture" src="../images/codacy-architecture.svg" /></p>
<p>Since all components are running on a cluster, you can increase the number of replicas in every deployment to give you more resilience and throughput, at a cost of increased resource usage.</p>
<p>The following is a simplified overview of how to calculate resource allocation for the "Platform" and the "Analysis":</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>vCPU</th>
<th>Memory</th>
</tr>
</thead>
<tbody>
<tr>
<td>Platform<br/>(1 replica per component)</td>
<td>4</td>
<td>8 GB</td>
</tr>
<tr>
<td>Analysis<br/>(1 Analysis Worker + <strong>up to</strong> 4 linters)</td>
<td>5<br/>(per Analysis Worker)</td>
<td>10 GB<br/>(per Analysis Worker)</td>
</tr>
</tbody>
</table>
<h4 id="standard-cluster-provisioning">Standard cluster provisioning<a class="headerlink" href="#standard-cluster-provisioning" title="Permanent link">&para;</a></h4>
<p>The resources recommended on the following table are based on our experience and are also the defaults in the <a href="https://raw.githubusercontent.com/codacy/chart/master/codacy/values-production.yaml"><code>values-production.yaml</code></a> file, which you might need to adapt taking into account your use case. As described in the section above, Codacy's architecture allows scaling the "Analysis" part of the platform, meaning that the resources needed for Codacy <strong>depend mainly on the rate of commits</strong> done by your team that Codacy will be analyzing.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>For MicroK8s clusters we added an extra 1.5 vCPU and 1.5 GB memory to the "Platform" to account for the MicroK8s platform itself running on the same machine.</p>
</div>
<table>
<thead>
<tr>
<th>Installation type</th>
<th>Replicas per component</th>
<th>Max. concurrent analysis</th>
<th>Platform resources</th>
<th>Analysis resources</th>
<th><strong>~ Total resources</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Kubernetes<br/>Small Installation</td>
<td>1</td>
<td>2</td>
<td>4 vCPUs<br/>8 GB RAM</td>
<td>10 vCPUs<br/>20 GB RAM</td>
<td><strong>16 vCPUs<br/>32 GB RAM</strong></td>
</tr>
<tr>
<td>Kubernetes<br/>Medium Installation (default)</td>
<td>2</td>
<td>4</td>
<td>8 vCPUs<br/>16 GB RAM</td>
<td>20 vCPUs<br/>40 GB RAM</td>
<td><strong>32 vCPUs<br/>64 GB RAM</strong></td>
</tr>
<tr>
<td>Kubernetes<br/>Big Installation</td>
<td>2+</td>
<td>10+</td>
<td>8+ vCPUs<br/>16+ GB RAM</td>
<td>50+ vCPUs<br/>100+ GB RAM</td>
<td><strong>60+ vCPUs<br/>110+ GB RAM</strong></td>
</tr>
<tr>
<td>MicroK8s<br/>Minimum</td>
<td>1</td>
<td>2</td>
<td>5.5 vCPUs<br/>9.5 GB RAM</td>
<td>10 vCPUs<br/>20 GB RAM</td>
<td><strong>16 vCPUs<br/>32 GB RAM</strong></td>
</tr>
<tr>
<td>MicroK8s<br/>Recommended (default)</td>
<td>1+</td>
<td>2</td>
<td>9.5+ vCPUs<br/>17.5+ GB RAM</td>
<td>10 vCPUs<br/>20 GB RAM</td>
<td><strong>21+ vCPUs<br/>40+ GB RAM</strong></td>
</tr>
</tbody>
</table>
<p>The storage requirements recommended on the following table <strong>depend mainly on the number of repositories</strong> that Codacy will be analyzing and should be used as a guideline to determine your installation requirements.</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Bundled in the chart?</th>
<th><strong>Minimum recommended</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>NFS</td>
<td>Yes</td>
<td><strong>200 GB</strong></td>
</tr>
<tr>
<td>RabbitMQ</td>
<td>Yes</td>
<td><strong>8 GB</strong></td>
</tr>
<tr>
<td>Minio</td>
<td>Yes</td>
<td><strong>20 GB</strong></td>
</tr>
<tr>
<td>PostgreSQL</td>
<td>No (external DB recommended)</td>
<td><strong>500 GB+</strong></td>
</tr>
</tbody>
</table>
<h2 id="postgresql-server-setup">PostgreSQL server setup<a class="headerlink" href="#postgresql-server-setup" title="Permanent link">&para;</a></h2>
<p>Codacy requires a database server to persist data that must satisfy the following requirements:</p>
<ul>
<li>The infrastructure hosting the database server must be provisioned with the hardware requirements described below</li>
<li>The DBMS server must be <a href="https://www.postgresql.org/">PostgreSQL</a> <strong>version 9.6</strong></li>
<li>The PostgreSQL server must be configured to accept connections from the cluster</li>
<li>The Codacy databases and a dedicated user must be created using the instructions below</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Google, the developer of Kubernetes, <a href="https://cloud.google.com/blog/products/databases/to-run-or-not-to-run-a-database-on-kubernetes-what-to-consider">doesn't recommend running database servers on your cluster</a>. As such, consider using a managed solution like Amazon RDS or Google Cloud SQL, or running the PostgreSQL server on a dedicated virtual machine.</p>
<p>We recommend that you use a managed solution to reduce maintenance and configuration costs of the PostgreSQL server. The main cloud providers all have this service that you can use, for example:</p>
<ul>
<li><a href="https://aws.amazon.com/rds/postgresql/resources/">Amazon RDS for PostgreSQL</a> or <a href="https://aws.amazon.com/rds/aurora/postgresql-features/">Amazon Aurora PostgreSQL-Compatible Edition</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/postgresql/">Azure Database for PostgreSQL</a></li>
<li><a href="https://cloud.google.com/sql/docs/postgres">Google Cloud SQL for PostgreSQL</a></li>
<li><a href="https://www.digitalocean.com/products/managed-databases-postgresql/">Digital Ocean Managed Databases</a></li>
</ul>
</div>
<h3 id="postgresql-hardware-requirements">PostgreSQL hardware requirements<a class="headerlink" href="#postgresql-hardware-requirements" title="Permanent link">&para;</a></h3>
<p>The following are the minimum specifications recommended for provisioning the PostgreSQL server:</p>
<table>
<thead>
<tr>
<th>vCPUs</th>
<th>Memory</th>
<th>Storage</th>
<th>Max. concurrent connections</th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>8 GB</td>
<td>500 GB+</td>
<td>300</td>
</tr>
</tbody>
</table>
<h3 id="preparing-postgresql-for-codacy">Preparing PostgreSQL for Codacy<a class="headerlink" href="#preparing-postgresql-for-codacy" title="Permanent link">&para;</a></h3>
<p>Before installing Codacy you must create a set of databases that will be used by Codacy to persist data. We also recommend that you create a dedicated user for Codacy, with access permissions only to the databases that are specific to Codacy:</p>
<ol>
<li>
<p>Connect to the PostgreSQL server as a database admin user. For example, using the <code>psql</code> command line client:</p>
<div class="highlight"><pre><span></span><code>psql -U postgres -h &lt;PostgreSQL server hostname&gt;
</code></pre></div>

</li>
<li>
<p>Create the dedicated user that Codacy will use to connect to PostgreSQL. Make sure that you change the username and password to suit your security needs:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">codacy</span> <span class="k">WITH</span> <span class="n">PASSWORD</span> <span class="s1">&#39;codacy&#39;</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">ROLE</span> <span class="n">codacy</span> <span class="k">WITH</span> <span class="k">CREATEDB</span><span class="p">;</span>
</code></pre></div>

<p>Take note of the username and password you define, as you will require them later to configure the connection from Codacy to the PostgreSQL server.</p>
</li>
<li>
<p>Make sure that you can connect to the PostgreSQL database using the newly created user. For example, using the <code>psql</code> command line client:</p>
<div class="highlight"><pre><span></span><code>psql -U codacy -d postgres -h &lt;PostgreSQL server hostname&gt;
</code></pre></div>

</li>
<li>
<p>Create the databases required by Codacy:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">accounts</span> <span class="k">WITH</span> <span class="k">OWNER</span><span class="o">=</span><span class="n">codacy</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">analysis</span> <span class="k">WITH</span> <span class="k">OWNER</span><span class="o">=</span><span class="n">codacy</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">results</span> <span class="k">WITH</span> <span class="k">OWNER</span><span class="o">=</span><span class="n">codacy</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">metrics</span> <span class="k">WITH</span> <span class="k">OWNER</span><span class="o">=</span><span class="n">codacy</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">filestore</span> <span class="k">WITH</span> <span class="k">OWNER</span><span class="o">=</span><span class="n">codacy</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">jobs</span> <span class="k">WITH</span> <span class="k">OWNER</span><span class="o">=</span><span class="n">codacy</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">activities</span> <span class="k">WITH</span> <span class="k">OWNER</span><span class="o">=</span><span class="n">codacy</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">hotspots</span> <span class="k">WITH</span> <span class="k">OWNER</span><span class="o">=</span><span class="n">codacy</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">listener</span> <span class="k">WITH</span> <span class="k">OWNER</span><span class="o">=</span><span class="n">codacy</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">crow</span> <span class="k">WITH</span> <span class="k">OWNER</span><span class="o">=</span><span class="n">codacy</span><span class="p">;</span>
</code></pre></div>

</li>
</ol>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href=".." title="Installing Codacy on Kubernetes" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Installing Codacy on Kubernetes
              </div>
            </div>
          </a>
        
        
          <a href="../infrastructure/eks-quickstart/" title="Creating an Amazon EKS cluster" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Creating an Amazon EKS cluster
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Â© <a href="https://www.codacy.com/">Codacy</a>
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../assets/javascripts/bundle.5f27aba8.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../javascripts/extra.js"></script>
      
    
  </body>
</html>